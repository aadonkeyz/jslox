(this.webpackJsonpjslox=this.webpackJsonpjslox||[]).push([[0],{118:function(e,t,n){},121:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"BaseExpression",(function(){return w})),n.d(i,"BinaryExpression",(function(){return N})),n.d(i,"LogicalExpression",(function(){return L})),n.d(i,"GroupingExpression",(function(){return C})),n.d(i,"LiteralExpression",(function(){return U})),n.d(i,"UnaryExpression",(function(){return F})),n.d(i,"VariableExpression",(function(){return H})),n.d(i,"AssignmentExpression",(function(){return B})),n.d(i,"CallExpression",(function(){return D})),n.d(i,"GetExpression",(function(){return _})),n.d(i,"SetExpression",(function(){return P})),n.d(i,"ThisExpression",(function(){return G})),n.d(i,"SuperExpression",(function(){return M}));var s,a,r=n(0),c=n.n(r),o=n(35),u=n.n(o),h=(n(118),n(29)),l=n(203),v=n(82),f=n(108),m=n(202),p=n(204),d=n(201),E=n(206),y=n(207),b=n(100),k=n(7),O=n(9),j=n(24);!function(e){e.AND="and",e.CLASS="class",e.ELSE="else",e.FALSE="false",e.FUN="fun",e.FOR="for",e.IF="if",e.NIL="nil",e.OR="or",e.PRINT="print",e.RETURN="return",e.SUPER="super",e.THIS="this",e.TRUE="true",e.VAR="var",e.WHILE="while",e.LEFT_PARENTHESE="(",e.RIGHT_PARENTHESE=")",e.LEFT_BRACE="{",e.RIGHT_BRACE="}",e.COMMA=",",e.DOT=".",e.MINUS="-",e.PLUS="+",e.SEMICOLON=";",e.SLASH="/",e.STAR="*",e.BANG="!",e.BANG_EQUAL="!=",e.EQUAL="=",e.EQUAL_EQUAL="==",e.GREATER=">",e.GREATER_EQUAL=">=",e.LESS="<",e.LESS_EQUAL="<=",e.IDENTIFIER="identifier",e.STRING="string",e.NUMBER="number",e.EOF="eof"}(a||(a={}));var x,S,g=(s={},Object(j.a)(s,a.AND,a.AND),Object(j.a)(s,a.CLASS,a.CLASS),Object(j.a)(s,a.ELSE,a.ELSE),Object(j.a)(s,a.FALSE,a.FALSE),Object(j.a)(s,a.FUN,a.FUN),Object(j.a)(s,a.FOR,a.FOR),Object(j.a)(s,a.IF,a.IF),Object(j.a)(s,a.NIL,a.NIL),Object(j.a)(s,a.OR,a.OR),Object(j.a)(s,a.PRINT,a.PRINT),Object(j.a)(s,a.RETURN,a.RETURN),Object(j.a)(s,a.SUPER,a.SUPER),Object(j.a)(s,a.THIS,a.THIS),Object(j.a)(s,a.TRUE,a.TRUE),Object(j.a)(s,a.VAR,a.VAR),Object(j.a)(s,a.WHILE,a.WHILE),s),T=function e(t){Object(k.a)(this,e),this.type=void 0,this.lexeme=void 0,this.line=void 0,this.column=void 0,this.literal=void 0,this.type=t.type,this.lexeme=t.lexeme,this.line=t.line,this.column=t.column,this.literal=t.literal},A=function(){function e(t){Object(k.a)(this,e),this.source=void 0,this.tokens=void 0,this.start=void 0,this.current=void 0,this.line=void 0,this.errors=void 0,this.source=t,this.tokens=[],this.start=0,this.current=0,this.line=1,this.errors=[]}return Object(O.a)(e,[{key:"scan",value:function(){for(;!this.isAtEnd();)this.start=this.current,this.scanToken();this.tokens.push(new T({type:a.EOF,lexeme:"",line:this.line,column:this.calculateColumn(this.source.length-1)}))}},{key:"scanToken",value:function(){var e=this.advance();switch(e){case"(":this.addToken(a.LEFT_PARENTHESE);break;case")":this.addToken(a.RIGHT_PARENTHESE);break;case"{":this.addToken(a.LEFT_BRACE);break;case"}":this.addToken(a.RIGHT_BRACE);break;case",":this.addToken(a.COMMA);break;case".":this.addToken(a.DOT);break;case"-":this.addToken(a.MINUS);break;case"+":this.addToken(a.PLUS);break;case";":this.addToken(a.SEMICOLON);break;case"*":this.addToken(a.STAR);break;case"!":this.addToken(this.match("=")?a.BANG_EQUAL:a.BANG);break;case"=":this.addToken(this.match("=")?a.EQUAL_EQUAL:a.EQUAL);break;case"<":this.addToken(this.match("=")?a.LESS_EQUAL:a.LESS);break;case">":this.addToken(this.match("=")?a.GREATER_EQUAL:a.GREATER);break;case"/":if(this.match("/"))for(;"\n"!==this.peek()&&!this.isAtEnd();)this.advance();else this.addToken(a.SLASH);break;case" ":case"\r":case"\t":break;case"\n":this.line++;break;case'"':case"'":this.handleString(e);break;default:this.isDigit(e)?this.handleDigit():this.isAlpha(e)?this.handleAlpha():this.errors.push({line:this.line,column:this.calculateColumn(this.current-1),message:"Unexpected character"})}}},{key:"isAtEnd",value:function(){return this.current>=this.source.length}},{key:"advance",value:function(){return this.source[this.current++]||""}},{key:"peek",value:function(){return this.source[this.current]||""}},{key:"peekNext",value:function(){return this.source[this.current+1]||""}},{key:"match",value:function(e){return!this.isAtEnd()&&(this.source[this.current]===e&&(this.current++,!0))}},{key:"isDigit",value:function(e){return/^[0-9]$/.test(e)}},{key:"isAlpha",value:function(e){return/^[_a-zA-Z]$/.test(e)}},{key:"handleString",value:function(e){for(;this.peek()!==e&&!this.isAtEnd();)"\n"===this.peek()&&this.line++,this.advance();if(this.isAtEnd())this.errors.push({line:this.line,column:this.calculateColumn(this.current-1),message:"Unterminated string"});else{this.advance();var t=this.source.slice(this.start+1,this.current-1);this.addToken(a.STRING,t)}}},{key:"handleDigit",value:function(){for(;this.isDigit(this.peek());)this.advance();if("."===this.peek()&&this.isDigit(this.peekNext()))for(this.advance();this.isDigit(this.peek());)this.advance();var e=Number(this.source.slice(this.start,this.current));this.addToken(a.NUMBER,e)}},{key:"handleAlpha",value:function(){for(;this.isAlpha(this.peek())||this.isDigit(this.peek());)this.advance();var e=this.source.slice(this.start,this.current),t=e in g?g[e]:a.IDENTIFIER;this.addToken(t)}},{key:"addToken",value:function(e,t){var n=this.source.slice(this.start,this.current);this.tokens.push(new T({type:e,lexeme:n,line:this.line,column:this.calculateColumn(this.start),literal:t}))}},{key:"calculateColumn",value:function(e){return e-this.source.slice(0,e).lastIndexOf("\n")}}]),e}(),I=n(23),R=n(22),w=function(){function e(){Object(k.a)(this,e)}return Object(O.a)(e,[{key:"accept",value:function(e){}}]),e}(),N=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i,s){var a;return Object(k.a)(this,n),(a=t.call(this)).left=void 0,a.operator=void 0,a.right=void 0,a.left=e,a.operator=i,a.right=s,a}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitBinaryExpression(this)}}]),n}(w),L=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i,s){var a;return Object(k.a)(this,n),(a=t.call(this)).left=void 0,a.operator=void 0,a.right=void 0,a.left=e,a.operator=i,a.right=s,a}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitLogicalExpression(this)}}]),n}(w),C=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).expression=void 0,i.expression=e,i}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitGroupingExpression(this)}}]),n}(w),U=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).value=void 0,i.value=e,i}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitLiteralExpression(this)}}]),n}(w),F=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i){var s;return Object(k.a)(this,n),(s=t.call(this)).operator=void 0,s.expression=void 0,s.operator=e,s.expression=i,s}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitUnaryExpression(this)}}]),n}(w),H=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).name=void 0,i.name=e,i}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitVariableExpression(this)}}]),n}(w),B=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i){var s;return Object(k.a)(this,n),(s=t.call(this)).name=void 0,s.value=void 0,s.name=e,s.value=i,s}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitAssignmentExpression(this)}}]),n}(w),D=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i,s){var a;return Object(k.a)(this,n),(a=t.call(this)).callee=void 0,a.args=void 0,a.endParenthese=void 0,a.callee=e,a.args=i,a.endParenthese=s,a}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitCallExpression(this)}}]),n}(w),_=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i){var s;return Object(k.a)(this,n),(s=t.call(this)).object=void 0,s.name=void 0,s.object=e,s.name=i,s}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitGetExpression(this)}}]),n}(w),P=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i,s){var a;return Object(k.a)(this,n),(a=t.call(this)).object=void 0,a.name=void 0,a.value=void 0,a.object=e,a.name=i,a.value=s,a}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitSetExpression(this)}}]),n}(w),G=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).keyword=void 0,i.keyword=e,i}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitThisExpression(this)}}]),n}(w),M=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i){var s;return Object(k.a)(this,n),(s=t.call(this)).keyword=void 0,s.method=void 0,s.keyword=e,s.method=i,s}return Object(O.a)(n,[{key:"accept",value:function(e){return e.visitSuperExpression(this)}}]),n}(w),z=function(){function e(){Object(k.a)(this,e)}return Object(O.a)(e,[{key:"accept",value:function(e){}}]),e}(),Q=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).expression=void 0,i.expression=e,i}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitExpressionStatement(this)}}]),n}(z),V=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i,s){var a;return Object(k.a)(this,n),(a=t.call(this)).condition=void 0,a.thenBranch=void 0,a.elseBranch=void 0,a.condition=e,a.thenBranch=i,a.elseBranch=s,a}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitIfStatement(this)}}]),n}(z),W=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).expression=void 0,i.expression=e,i}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitPrintStatement(this)}}]),n}(z),Y=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i){var s;return Object(k.a)(this,n),(s=t.call(this)).condition=void 0,s.body=void 0,s.condition=e,s.body=i,s}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitWhileStatement(this)}}]),n}(z),Z=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).initializer=void 0,i.condition=void 0,i.updator=void 0,i.body=void 0,i.initializer=e.initializer,i.condition=e.condition,i.updator=e.updator,i.body=e.body,i}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitForStatement(this)}}]),n}(z),q=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i){var s;return Object(k.a)(this,n),(s=t.call(this)).name=void 0,s.initializer=void 0,s.name=e,s.initializer=i,s}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitVarStatement(this)}}]),n}(z),J=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e){var i;return Object(k.a)(this,n),(i=t.call(this)).statements=void 0,i.statements=e,i}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitBlockStatement(this)}}]),n}(z),K=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i,s){var a;return Object(k.a)(this,n),(a=t.call(this)).name=void 0,a.params=void 0,a.body=void 0,a.name=e,a.params=i,a.body=s,a}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitFunctionStatement(this)}}]),n}(z),$=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i){var s;return Object(k.a)(this,n),(s=t.call(this)).keyword=void 0,s.value=void 0,s.keyword=e,s.value=i,s}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitReturnStatement(this)}}]),n}(z),X=function(e){Object(I.a)(n,e);var t=Object(R.a)(n);function n(e,i,s){var a;return Object(k.a)(this,n),(a=t.call(this)).name=void 0,a.superclass=void 0,a.methods=void 0,a.name=e,a.superclass=i,a.methods=s,a}return Object(O.a)(n,[{key:"accept",value:function(e){e.visitClassStatement(this)}}]),n}(z),ee=function(){function e(t){Object(k.a)(this,e),this.tokens=void 0,this.current=void 0,this.statements=void 0,this.errors=void 0,this.tokens=t,this.current=0,this.statements=[],this.errors=[]}return Object(O.a)(e,[{key:"parse",value:function(){for(;!this.isAtEnd();){var e=this.declaration();e&&this.statements.push(e)}}},{key:"declaration",value:function(){try{return this.match([a.FUN])?this.funDecl("function"):this.match([a.CLASS])?this.classDecl():this.match([a.VAR])?this.varDecl():this.statement()}catch(e){this.synchronize()}}},{key:"funDecl",value:function(e){var t=this.consume(a.IDENTIFIER,"Expect ".concat(e," name"));this.consume(a.LEFT_PARENTHESE,'Expect "(" after '.concat(e," name"));var n=[];if(!this.check(a.RIGHT_PARENTHESE))do{n.push(this.consume(a.IDENTIFIER,"Expect parameter name"))}while(this.match([a.COMMA]));this.consume(a.RIGHT_PARENTHESE,'Expect ")" after parameters'),this.consume(a.LEFT_BRACE,'Expect "{" before '.concat(e," body"));var i=new J(this.block());return new K(t,n,i)}},{key:"classDecl",value:function(){var e=this.consume(a.IDENTIFIER,"Expect class name"),t=null;this.match([a.LESS])&&(this.consume(a.IDENTIFIER,"Expect superclass name"),t=new H(this.previous())),this.consume(a.LEFT_BRACE,'Expect "{" before class body');for(var n=[];!this.check(a.RIGHT_BRACE)&&!this.isAtEnd();)n.push(this.funDecl("method"));return this.consume(a.RIGHT_BRACE,'Expect "}" after class body'),new X(e,t,n)}},{key:"varDecl",value:function(){var e,t=this.consume(a.IDENTIFIER,"Expect variable name");return this.match([a.EQUAL])&&(e=this.expression()),this.consume(a.SEMICOLON,'Expect ";" after variable declaration'),new q(t,e)}},{key:"statement",value:function(){return this.match([a.IF])?this.ifStmt():this.match([a.PRINT])?this.printStmt():this.match([a.RETURN])?this.returnStmt():this.match([a.WHILE])?this.whileStmt():this.match([a.FOR])?this.forStmt():this.match([a.LEFT_BRACE])?new J(this.block()):this.exprStmt()}},{key:"ifStmt",value:function(){this.consume(a.LEFT_PARENTHESE,'Expect "(" after "if"');var e=this.expression();this.consume(a.RIGHT_PARENTHESE,'Expect ")" after if condition');var t=this.statement(),n=this.match([a.ELSE])?this.statement():void 0;return new V(e,t,n)}},{key:"block",value:function(){for(var e=[];!this.check(a.RIGHT_BRACE)&&!this.isAtEnd();){var t=this.declaration();t&&e.push(t)}return this.consume(a.RIGHT_BRACE,'Expect "}" after block'),e}},{key:"exprStmt",value:function(){var e=this.expression();return this.consume(a.SEMICOLON,'Expect ";" after expression'),new Q(e)}},{key:"printStmt",value:function(){var e=this.expression();return this.consume(a.SEMICOLON,'Expect ";" after value'),new W(e)}},{key:"returnStmt",value:function(){var e=this.previous(),t=this.check(a.SEMICOLON)?new U(null):this.expression();return this.consume(a.SEMICOLON,'Expect ";" after return value'),new $(e,t)}},{key:"whileStmt",value:function(){this.consume(a.LEFT_PARENTHESE,'Expect "(" after "while"');var e=this.expression();this.consume(a.RIGHT_PARENTHESE,'Expect ")" after condition');var t=this.statement();return new Y(e,t)}},{key:"forStmt",value:function(){if(this.consume(a.LEFT_PARENTHESE,'Expect "(" after "for"'),this.check(a.RIGHT_PARENTHESE))throw this.errors.push({line:this.peek().line,column:this.peek().column,message:'There is nothing exist in the parenthese of "for"'}),new Error;var e,t,n;this.check(a.SEMICOLON)?this.advance():e=this.declaration(),this.match([a.SEMICOLON])||(t=this.expression(),this.consume(a.SEMICOLON,'Expect ";" after the condition of "for"')),this.match([a.RIGHT_PARENTHESE])||(n=this.expression(),this.consume(a.RIGHT_PARENTHESE,'Expect ")" after the parenthese of "for"'));var i=this.statement();return new Z({initializer:e,condition:t,updator:n,body:i})}},{key:"expression",value:function(){return this.assignment()}},{key:"assignment",value:function(){var e=this.logicOr();if(this.match([a.EQUAL])){var t=this.previous(),n=this.assignment();if(e instanceof H){var i=e.name;return new B(i,n)}if(e instanceof _)return new P(e.object,e.name,n);throw this.errors.push({line:t.line,column:t.column,message:"Invalid assignment target"}),new Error}return e}},{key:"logicOr",value:function(){for(var e=this.logicAnd();this.match([a.OR]);){var t=this.previous(),n=this.logicAnd();e=new L(e,t,n)}return e}},{key:"logicAnd",value:function(){for(var e=this.equality();this.match([a.AND]);){var t=this.previous(),n=this.equality();e=new L(e,t,n)}return e}},{key:"equality",value:function(){for(var e=this.comparison();this.match([a.BANG_EQUAL,a.EQUAL_EQUAL]);){var t=this.previous(),n=this.comparison();e=new N(e,t,n)}return e}},{key:"comparison",value:function(){for(var e=this.term();this.match([a.GREATER,a.GREATER_EQUAL,a.LESS,a.LESS_EQUAL]);){var t=this.previous(),n=this.term();e=new N(e,t,n)}return e}},{key:"term",value:function(){for(var e=this.factor();this.match([a.MINUS,a.PLUS]);){var t=this.previous(),n=this.factor();e=new N(e,t,n)}return e}},{key:"factor",value:function(){for(var e=this.unary();this.match([a.SLASH,a.STAR]);){var t=this.previous(),n=this.unary();e=new N(e,t,n)}return e}},{key:"unary",value:function(){if(this.match([a.BANG,a.MINUS])){var e=this.previous(),t=this.unary();return new F(e,t)}return this.call()}},{key:"call",value:function(){for(var e=this.primary();this.match([a.LEFT_PARENTHESE,a.DOT]);){var t=this.previous().type;if(t===a.LEFT_PARENTHESE)e=this.finishCall(e);else if(t===a.DOT){var n=this.consume(a.IDENTIFIER,'Expect property name after "."');e=new _(e,n)}}return e}},{key:"finishCall",value:function(e){var t=[];if(!this.check(a.RIGHT_PARENTHESE))do{t.push(this.expression())}while(this.match([a.COMMA]));var n=this.consume(a.RIGHT_PARENTHESE,'Expect ")" after arguments');return new D(e,t,n)}},{key:"primary",value:function(){if(this.match([a.NUMBER,a.STRING]))return new U(this.previous().literal);if(this.match([a.TRUE]))return new U(!0);if(this.match([a.FALSE]))return new U(!1);if(this.match([a.NIL]))return new U(null);if(this.match([a.THIS]))return new G(this.previous());if(this.match([a.SUPER])){var e=this.previous();return this.consume(a.DOT,'Expect "." after "super"'),this.consume(a.IDENTIFIER,"Expect superclass method name"),new M(e,this.previous())}if(this.match([a.IDENTIFIER]))return new H(this.previous());if(this.match([a.LEFT_PARENTHESE])){var t=new C(this.expression());return this.consume(a.RIGHT_PARENTHESE,'Expect ")" after expression'),t}throw this.errors.push({line:this.peek().line,column:this.peek().column,message:'Unexpected token "'.concat(this.peek().lexeme,'"')}),new Error}},{key:"match",value:function(e){for(var t=0;t<e.length;t++)if(this.check(e[t]))return this.advance(),!0;return!1}},{key:"consume",value:function(e,t){if(this.check(e))return this.advance();throw this.errors.push({line:this.previous().line,column:this.previous().column,message:t}),new Error}},{key:"check",value:function(e){return!this.isAtEnd()&&e===this.peek().type}},{key:"advance",value:function(){return this.isAtEnd()||this.current++,this.previous()}},{key:"peek",value:function(){return this.tokens[this.current]}},{key:"previous",value:function(){return this.tokens[this.current-1]}},{key:"isAtEnd",value:function(){return this.peek().type===a.EOF}},{key:"synchronize",value:function(){for(this.advance();!this.isAtEnd();){if(this.previous().type===a.SEMICOLON)return;switch(this.peek().type){case a.CLASS:case a.FUN:case a.VAR:case a.FOR:case a.IF:case a.WHILE:case a.PRINT:case a.RETURN:return}this.advance()}}}]),e}();!function(e){e[e.NONE=0]="NONE",e[e.FUNCTION=1]="FUNCTION",e[e.METHOD=2]="METHOD",e[e.INITIALIZER=3]="INITIALIZER"}(x||(x={})),function(e){e[e.NONE=0]="NONE",e[e.CLASS=1]="CLASS",e[e.SUBCLASS=2]="SUBCLASS"}(S||(S={}));var te=function(){function e(t){Object(k.a)(this,e),this.statements=void 0,this.scopes=void 0,this.scopeRecord=void 0,this.functionType=void 0,this.classType=void 0,this.errors=void 0,this.statements=t,this.scopes=[],this.scopeRecord=new Map,this.functionType=x.NONE,this.classType=S.NONE,this.errors=[]}return Object(O.a)(e,[{key:"analysis",value:function(){this.evaluateList(this.statements)}},{key:"evaluateList",value:function(e){for(var t=0;t<e.length;t++)this.evaluateItem(e[t])}},{key:"evaluateItem",value:function(e){e.accept(this)}},{key:"evaluateFunction",value:function(e,t){var n=this,i=this.functionType;this.functionType=t,this.scopes.push({}),e.params.forEach((function(e){n.declare(e),n.define(e)})),this.evaluateList(e.body.statements),this.scopes.pop(),this.functionType=i}},{key:"declare",value:function(e){0!==this.scopes.length&&(this.scopes[this.scopes.length-1][e.lexeme]=!1)}},{key:"define",value:function(e){0!==this.scopes.length&&(this.scopes[this.scopes.length-1][e.lexeme]=!0)}},{key:"calculate",value:function(e,t){for(var n=this.scopes.length-1;n>=0;n--)if(t.lexeme in this.scopes[n])return void this.scopeRecord.set(e,this.scopes.length-1-n)}},{key:"visitExpressionStatement",value:function(e){this.evaluateItem(e.expression)}},{key:"visitIfStatement",value:function(e){this.evaluateItem(e.condition),this.evaluateItem(e.thenBranch),e.elseBranch&&this.evaluateItem(e.elseBranch)}},{key:"visitPrintStatement",value:function(e){this.evaluateItem(e.expression)}},{key:"visitWhileStatement",value:function(e){this.evaluateItem(e.condition),this.evaluateItem(e.body)}},{key:"visitForStatement",value:function(e){this.scopes.push({}),e.initializer&&this.evaluateItem(e.initializer),e.condition&&this.evaluateItem(e.condition),e.updator&&this.evaluateItem(e.updator),this.evaluateItem(e.body),this.scopes.pop()}},{key:"visitVarStatement",value:function(e){this.declare(e.name),e.initializer&&this.evaluateItem(e.initializer),this.define(e.name)}},{key:"visitBlockStatement",value:function(e){this.scopes.push({}),this.evaluateList(e.statements),this.scopes.pop()}},{key:"visitFunctionStatement",value:function(e){this.declare(e.name),this.define(e.name),this.evaluateFunction(e,x.FUNCTION)}},{key:"visitReturnStatement",value:function(e){this.functionType===x.NONE&&this.errors.push({line:e.keyword.line,column:e.keyword.column,message:"Can't return from top-level code"}),e.value instanceof i.LiteralExpression&&null===e.value.value||(this.functionType===x.INITIALIZER&&this.errors.push({line:e.keyword.line,column:e.keyword.column,message:"Can't use return a value from an initializer"}),this.evaluateItem(e.value))}},{key:"visitClassStatement",value:function(e){var t=this,n=this.classType;this.classType=S.CLASS,this.declare(e.name),e.superclass&&(e.name.lexeme===e.superclass.name.lexeme&&this.errors.push({line:e.name.line,column:e.name.column,message:"A class can't inherit from itself(\"".concat(e.name.lexeme,'")')}),this.evaluateItem(e.superclass),this.scopes.push({super:!0}),this.classType=S.SUBCLASS),this.scopes.push({this:!0}),e.methods.forEach((function(e){t.evaluateFunction(e,"init"===e.name.lexeme?x.INITIALIZER:x.METHOD)})),this.scopes.pop(),e.superclass&&this.scopes.pop(),this.define(e.name),this.classType=n}},{key:"visitBinaryExpression",value:function(e){this.evaluateItem(e.left),this.evaluateItem(e.right)}},{key:"visitLogicalExpression",value:function(e){this.evaluateItem(e.left),this.evaluateItem(e.right)}},{key:"visitGroupingExpression",value:function(e){this.evaluateItem(e.expression)}},{key:"visitLiteralExpression",value:function(e){}},{key:"visitUnaryExpression",value:function(e){this.evaluateItem(e.expression)}},{key:"visitVariableExpression",value:function(e){0!==this.scopes.length&&!1===this.scopes[this.scopes.length-1][e.name.lexeme]&&this.errors.push({line:e.name.line,column:e.name.column,message:"Can't read local variable in its own initializer(\"".concat(e.name.lexeme,'")')}),this.calculate(e,e.name)}},{key:"visitAssignmentExpression",value:function(e){this.evaluateItem(e.value),this.calculate(e,e.name)}},{key:"visitCallExpression",value:function(e){this.evaluateItem(e.callee),this.evaluateList(e.args)}},{key:"visitGetExpression",value:function(e){this.evaluateItem(e.object)}},{key:"visitSetExpression",value:function(e){this.evaluateItem(e.value),this.evaluateItem(e.object)}},{key:"visitThisExpression",value:function(e){this.classType===S.NONE&&this.errors.push({line:e.keyword.line,column:e.keyword.column,message:'Can\'t use "this" outside of a class'}),this.calculate(e,e.keyword)}},{key:"visitSuperExpression",value:function(e){this.classType===S.NONE?this.errors.push({line:e.keyword.line,column:e.keyword.column,message:'Can\'t use "super" outside of a class'}):this.classType===S.CLASS&&this.errors.push({line:e.keyword.line,column:e.keyword.column,message:'Can\'t use "super" in a class with no superclass'}),this.calculate(e,e.keyword)}}]),e}(),ne=te,ie=n(31);var se=function(e,t,n){return new Error("".concat(n," in line ").concat(e," column ").concat(t,"."))},ae=function(){function e(t){Object(k.a)(this,e),this.values=void 0,this.enclosing=void 0,this.values={},this.enclosing=t}return Object(O.a)(e,[{key:"define",value:function(e,t){this.values[e]=t}},{key:"get",value:function(e){if(e.lexeme in this.values)return this.values[e.lexeme];if(this.enclosing)return this.enclosing.get(e);throw se(e.line,e.column,'Undefined variable at "'.concat(e.lexeme,'"'))}},{key:"getEnvironmentByDistance",value:function(e){for(var t=this;e>0&&t.enclosing;)t=t.enclosing,e-=1;return t}},{key:"assign",value:function(e,t){if(e.lexeme in this.values)this.values[e.lexeme]=t;else{if(!this.enclosing)throw se(e.line,e.column,'Undefined variable at "'.concat(e.lexeme,'"'));this.enclosing.assign(e,t)}}}]),e}(),re=function(){function e(t){Object(k.a)(this,e),this.belongClass=void 0,this.fields=void 0,this.belongClass=t,this.fields={}}return Object(O.a)(e,[{key:"get",value:function(e){if(e.lexeme in this.fields)return this.fields[e.lexeme];var t=this.belongClass.findMethod(e.lexeme);if(t)return t.bind(this);throw se(e.line,e.column,'Undefined property "'.concat(e.lexeme,'"'))}},{key:"set",value:function(e,t){this.fields[e.lexeme]=t}}]),e}(),ce=function(){function e(t,n,i){Object(k.a)(this,e),this.name=void 0,this.superclass=void 0,this.methods=void 0,this.name=t,this.superclass=n,this.methods=i}return Object(O.a)(e,[{key:"arity",value:function(){var e=this.methods.init;return e?e.arity():0}},{key:"findMethod",value:function(e){return e in this.methods?this.methods[e]:this.superclass?this.superclass.findMethod(e):null}},{key:"call",value:function(e,t){var n=new re(this),i=this.methods.init;return i&&i.bind(n).call(e,t),n}}]),e}(),oe=function e(t){Object(k.a)(this,e),this.value=void 0,this.value=t},ue=function(){function e(t,n,i){Object(k.a)(this,e),this.declaration=void 0,this.closure=void 0,this.isInitializer=void 0,this.declaration=t,this.closure=n,this.isInitializer=!!i}return Object(O.a)(e,[{key:"arity",value:function(){return this.declaration.params.length}},{key:"call",value:function(e,t){for(var n=new ae(this.closure),i=0;i<this.declaration.params.length;i++)n.define(this.declaration.params[i].lexeme,t[i]);var s=null;try{e.visitBlockStatement(this.declaration.body,n)}catch(a){if(!(a instanceof oe))throw a;s=a.value}return this.isInitializer?this.closure.values.this:s}},{key:"bind",value:function(t){var n=new ae(this.closure);return n.define("this",t),new e(this.declaration,n,this.isInitializer)}}]),e}(),he=function(){function e(t,n){Object(k.a)(this,e),this.nativeFn=void 0,this.instance=void 0,this.nativeFn=t,this.instance=n}return Object(O.a)(e,[{key:"call",value:function(e){return this.nativeFn(e,this.instance)}},{key:"bind",value:function(t){return new e(this.nativeFn,t)}}]),e}(),le=function(){function e(t,n){Object(k.a)(this,e),this.name=void 0,this.methods=void 0,this.name=t,this.methods=n}return Object(O.a)(e,[{key:"findMethod",value:function(e){return e in this.methods?this.methods[e]:null}},{key:"call",value:function(e){var t=new re(this),n=this.methods.init;return n&&n.bind(t).call(e),t}}]),e}();var ve=function(e){!function(e){e.define("String",new he((function(e){return String(e[0])})))}(e),function(e){var t=new le("Date",{init:new he((function(e,t){var n=e[0]?new Date(e[0]):new Date;t.fields.year=n.getFullYear(),t.fields.month=n.getMonth()+1,t.fields.date=n.getDate()})),getFullYear:new he((function(e,t){return t.fields.year})),getMonth:new he((function(e,t){return t.fields.month})),getDate:new he((function(e,t){return t.fields.date}))});e.define("Date",t)}(e)},fe=function(){function e(t,n){Object(k.a)(this,e),this.global=void 0,this.environment=void 0,this.statements=void 0,this.scopeRecord=void 0,this.global=new ae,this.environment=this.global,this.statements=t,this.scopeRecord=n||new Map,ve(this.global)}return Object(O.a)(e,[{key:"interpret",value:function(){for(var e=0;e<this.statements.length;e++)this.execute(this.statements[e])}},{key:"evaluate",value:function(e){return e.accept(this)}},{key:"execute",value:function(e){e.accept(this)}},{key:"visitFunctionStatement",value:function(e){var t=new ue(e,this.environment);this.environment.define(e.name.lexeme,t)}},{key:"visitClassStatement",value:function(e){var t=this;this.environment.define(e.name.lexeme,null);var n=null,i=null;if(e.superclass){if(!((n=this.evaluate(e.superclass))instanceof ce))throw se(e.superclass.name.line,e.superclass.name.column,'Superclass must be a class at "'.concat(e.superclass.name.lexeme,'"'));i=this.environment,this.environment=new ae(i),this.environment.define("super",n)}var s=e.methods.reduce((function(e,n){var i=new ue(n,t.environment,"init"===n.name.lexeme);return Object(ie.a)(Object(ie.a)({},e),{},Object(j.a)({},n.name.lexeme,i))}),{}),a=new ce(e.name.lexeme,n,s);i&&(this.environment=i),this.environment.assign(e.name,a)}},{key:"visitReturnStatement",value:function(e){throw new oe(this.evaluate(e.value))}},{key:"visitExpressionStatement",value:function(e){this.evaluate(e.expression)}},{key:"visitIfStatement",value:function(e){this.evaluate(e.condition)?this.execute(e.thenBranch):e.elseBranch&&this.execute(e.elseBranch)}},{key:"visitWhileStatement",value:function(e){for(;this.evaluate(e.condition);)this.execute(e.body)}},{key:"visitForStatement",value:function(e){var t=this.environment;for(this.environment=new ae(t),e.initializer&&this.evaluate(e.initializer);e.condition&&this.evaluate(e.condition);)this.execute(e.body),e.updator&&this.evaluate(e.updator);this.environment=t}},{key:"visitPrintStatement",value:function(e){var t=this.evaluate(e.expression);console.log(t)}},{key:"visitVarStatement",value:function(e){var t=e.initializer?this.evaluate(e.initializer):null;this.environment.define(e.name.lexeme,t)}},{key:"visitBlockStatement",value:function(e,t){var n=this.environment;this.environment=t||new ae(this.environment);try{for(var i=0;i<e.statements.length;i++)this.execute(e.statements[i])}catch(s){throw this.environment=n,s}this.environment=n}},{key:"visitLiteralExpression",value:function(e){return e.value}},{key:"visitGroupingExpression",value:function(e){return this.evaluate(e.expression)}},{key:"visitUnaryExpression",value:function(e){var t=this.evaluate(e.expression);if(e.operator.type===a.MINUS){if("number"!==typeof t)throw se(e.operator.line,e.operator.column,'Operand must be a number at "'.concat(e.operator.lexeme,'"'));return-t}if(e.operator.type===a.BANG)return!t;throw se(e.operator.line,e.operator.column,"Should not happen")}},{key:"visitBinaryExpression",value:function(e){var t=this.evaluate(e.left),n=this.evaluate(e.right);switch(e.operator.type){case a.PLUS:if("number"===typeof t&&"number"===typeof n)return t+n;if("string"===typeof t&&"string"===typeof n)return t+n;throw se(e.operator.line,e.operator.column,'Operands must be two numbers or two strings "'.concat(e.operator.lexeme,'"'));case a.MINUS:case a.SLASH:case a.STAR:case a.GREATER:case a.GREATER_EQUAL:case a.LESS:case a.LESS_EQUAL:return this.numberBinaryCalculate(e.operator,t,n);case a.BANG_EQUAL:return t!==n;case a.EQUAL_EQUAL:return t===n;default:throw se(e.operator.line,e.operator.column,"Should not happen")}}},{key:"numberBinaryCalculate",value:function(e,t,n){if("number"!==typeof t||"number"!==typeof n)throw se(e.line,e.column,'Operands must be numbers at "'.concat(e.lexeme,'"'));switch(e.type){case a.MINUS:return t-n;case a.SLASH:return t/n;case a.STAR:return t*n;case a.GREATER:return t>n;case a.GREATER_EQUAL:return t>=n;case a.LESS:return t<n;case a.LESS_EQUAL:return t<=n;default:throw se(e.line,e.column,"Should not happen")}}},{key:"visitLogicalExpression",value:function(e){var t=this.evaluate(e.left);if(e.operator.type===a.OR)return t||this.evaluate(e.right);if(e.operator.type===a.AND)return t?this.evaluate(e.right):t;throw se(e.operator.line,e.operator.column,"Should not happen")}},{key:"visitAssignmentExpression",value:function(e){var t=this.evaluate(e.value);if(!this.scopeRecord.has(e))return this.global.assign(e.name,t),t;var n=this.scopeRecord.get(e);return this.environment.getEnvironmentByDistance(n).assign(e.name,t),t}},{key:"visitVariableExpression",value:function(e){if(!this.scopeRecord.has(e))return this.global.get(e.name);var t=this.scopeRecord.get(e);return this.environment.getEnvironmentByDistance(t).get(e.name)}},{key:"visitCallExpression",value:function(e){var t=this,n=this.evaluate(e.callee),i=e.args.map((function(e){return t.evaluate(e)}));if(n instanceof he||n instanceof le)return n.call(i);if(!(n instanceof ue||n instanceof ce))throw se(e.endParenthese.line,e.endParenthese.column,'Can only call functions and classes at "'.concat(e.endParenthese.lexeme,'"'));if(i.length!==n.arity())throw se(e.endParenthese.line,e.endParenthese.column,"Expect ".concat(n.arity()," arguments but got ").concat(i.length,' at ")"'));return n.call(this,i)}},{key:"visitGetExpression",value:function(e){var t=this.evaluate(e.object);if(t instanceof re)return t.get(e.name);throw se(e.name.line,e.name.column,'Only instances have properties at "'.concat(e.name.lexeme,'"'))}},{key:"visitSetExpression",value:function(e){var t=this.evaluate(e.object);if(t instanceof re){var n=this.evaluate(e.value);return t.set(e.name,n),n}throw se(e.name.line,e.name.column,'Only instances have properties at "'.concat(e.name.lexeme,'"'))}},{key:"visitThisExpression",value:function(e){var t=this.scopeRecord.get(e);return this.environment.getEnvironmentByDistance(t).get(e.keyword)}},{key:"visitSuperExpression",value:function(e){var t=this.scopeRecord.get(e),n=this.environment.getEnvironmentByDistance(t).get(e.keyword),i=this.environment.getEnvironmentByDistance(t-1).values.this,s=n.findMethod(e.method.lexeme);if(s)return s.bind(i);throw se(e.keyword.line,e.keyword.column,"Undefined property ".concat(e.method.lexeme))}}]),e}(),me=function(){function e(t){Object(k.a)(this,e),this.source=void 0,this.scanner=void 0,this.parser=void 0,this.scopeAnalyst=void 0,this.interpreter=void 0,this.source=t}return Object(O.a)(e,[{key:"analysis",value:function(){this.scanner=new A(this.source),this.scanner.scan(),this.parser=new ee(this.scanner.tokens),this.parser.parse(),this.scopeAnalyst=new ne(this.parser.statements),this.scopeAnalyst.analysis(),this.interpreter=new fe(this.parser.statements,this.scopeAnalyst.scopeRecord)}},{key:"run",value:function(){this.interpreter.interpret()}}]),e}(),pe=(n(121),n(15)),de="Problems",Ee="Console",ye=[{key:de,label:de},{key:Ee,label:Ee}],be='class Person {\n  init(name, birth) {\n    this.name = name;\n    this.birth = birth;\n    this.age = Date().getFullYear() - this.birth;\n  }\n\n  introduceMySelf() {\n    print "my name is " + this.name;\n    print "i am " + String(this.age) + " years old";\n    print "thanks for coming";\n  }\n}\n\nvar me = Person("aadonkeyz", 1995);\nme.introduceMySelf();\n';var ke=function(e){var t=e.show,n=Object(r.useState)(ye[0].key),i=Object(h.a)(n,2),s=i[0],a=i[1],c=Object(r.useState)([]),o=Object(h.a)(c,2),u=o[0],l=o[1],k=Object(r.useState)([]),O=Object(h.a)(k,2),j=O[0],x=O[1],S=Object(r.useRef)(),g=Object(r.useCallback)(Object(b.debounce)((function(e){var t=new me(e);S.current=t,t.analysis(),window.zzz=t;var n=t.scanner.errors.concat(t.parser.errors,t.scopeAnalyst.errors).map((function(e){return"".concat(e.message," in line ").concat(e.line," column ").concat(e.column,".")}));l(n)}),500),[]);return Object(r.useEffect)((function(){var e=console.log;console.log=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];x((function(e){return[].concat(Object(v.a)(e),Object(v.a)(n.map((function(e){if(null===e)return"null";if(!(e instanceof Object))return String(e);try{return JSON.stringify(e)}catch(t){return Object.prototype.toString.apply(e)}}))))})),e.apply(void 0,n)},g(be)}),[]),Object(pe.jsxs)("div",{className:"playground",style:{display:t?"":"none"},children:[Object(pe.jsx)(f.a,{height:"65%",defaultLanguage:"plaintext",defaultValue:be,onChange:function(e){g(e||"")}}),Object(pe.jsx)("div",{className:"terminal",children:Object(pe.jsx)(m.a,{activeKey:s,onChange:a,tabBarExtraContent:Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(p.a,{danger:!0,icon:Object(pe.jsx)(E.a,{}),style:{marginRight:16},onClick:function(){return x([])},children:Object(pe.jsx)("span",{style:{transform:"translateY(-1px)"},children:"Clear"})}),Object(pe.jsx)(p.a,{style:{background:"#52c41a"},icon:Object(pe.jsx)(y.a,{}),disabled:u.length>0,onClick:function(){if(S.current)try{S.current.run()}catch(e){x((function(t){return[].concat(Object(v.a)(t),[e.message])}))}},children:Object(pe.jsx)("span",{style:{transform:"translateY(-1px)"},children:"Run"})})]}),children:ye.map((function(e){var t=null;e.key===de?t=Object(pe.jsx)(d.b,{header:null,footer:null,bordered:!0,dataSource:u,renderItem:function(e){return Object(pe.jsx)(d.b.Item,{children:e})}}):e.key===Ee&&(t=Object(pe.jsx)(d.b,{header:null,footer:null,bordered:!0,dataSource:j,renderItem:function(e){return Object(pe.jsx)(d.b.Item,{children:e})}}));var n=e.key;return e.key===de&&u.length>0&&(n+="(".concat(u.length,")")),Object(pe.jsx)(m.a.TabPane,{tab:n,children:t},e.key)}))})})]})},Oe=(n(197),"Playground"),je="Grammer";var xe=function(){var e=Object(r.useState)(Oe),t=Object(h.a)(e,2),n=t[0],i=t[1];return Object(pe.jsxs)("div",{className:"App",children:[Object(pe.jsxs)(l.a,{mode:"inline",theme:"dark",selectedKeys:[n],onClick:function(e){return i(e.key)},children:[Object(pe.jsx)(l.a.Item,{children:Oe},Oe),Object(pe.jsx)(l.a.Item,{children:je},je)]}),Object(pe.jsx)(ke,{show:n===Oe}),Object(pe.jsx)("iframe",{style:{display:n===je?"":"none",flex:"auto",height:"100%",border:"none"},title:"grammer",src:"https://craftinginterpreters.com/the-lox-language.html"})]})};u.a.render(Object(pe.jsx)(c.a.StrictMode,{children:Object(pe.jsx)(xe,{})}),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.69271619.chunk.js.map